## 第二次作业 文本分析

### 2.1 大致流程

- 读取stopwords_list.txt
- 读取jd_comments.txt，对其逐行进行jieba分词，并依据stopwords_list.txt初步筛选
- 对所有所分的词进行词频统计，并取出词频大于50的词，经过自定义stopwords_list再次筛选，得到特征词组成的特征集
- 对每一条评论依据特征集生成one-hot向量
- 计算每一条评论之间的距离，形成距离矩阵，并将其可视化
- 计算所有评论的“物理”重心
- 根据词频，进一步筛选后绘制词云图
- 根据所有评论的one-hot向量进行K-means聚类分析
- 尝试PCA降维可视化

### 2.2 代码实现

```python
import jieba
import numpy as np
import wordcloud
import matplotlib.pyplot as plt
from sklearn.decomposition import PCA
from sklearn.cluster import KMeans

def open_file1():
    stop_words = []
    with open("stopwords_list.txt", encoding="utf-8") as f:
        stop_words = f.readlines()
    for i in range(len(stop_words)):
        stop_words[i] = stop_words[i].strip("\n")
    return stop_words

def open_file2(sw_ls):
    comments_ori = []
    comments = []
    with open("jd_comments.txt", encoding="utf-8") as f:
        comments_ori = f.readlines()
    for i in range(len(comments_ori)):
        comment_ori = comments_ori[i].strip("\n")
        comments_ori[i] = comment_ori
        comment = screening(comment_ori, sw_ls)
        comments.append(comment)
    return comments, comments_ori

def screening(comment, sw_ls):
    add_word = ["不错", "跑分"]
    for word in add_word:
        jieba.add_word(word)
    words = jieba.lcut(comment)
    words_screened = []
    for word in words:
        if word in sw_ls:
            continue
        words_screened.append(word)
    return words_screened

def frequency(comm_ls):
    freq_dic = {}
    for word in [e for ele in comm_ls for e in ele]:
        if word in freq_dic:
            freq_dic[word] += 1
        else:
            freq_dic[word] = 1
    freq_sorted_temp = sorted(freq_dic.items(), key=lambda x:x[1], reverse=True)
    freq_sorted = []
    for tup in freq_sorted_temp:
        if tup[1] < 50:
            continue
        freq_sorted.append(tup)
    # 导出词频，核验特征词
    # with open("frequency.txt", "w", encoding="utf-8") as f:
    #     for tup in freq_sorted:
    #         f.write(tup[0] + "\t" + str(tup[1]) + "\n")
    return freq_sorted, freq_dic

def feature_filter(freq_sorted):
    my_stopwords_list = [" ", "不", "没", "京东", "感觉", "说", "上", "东西", "看", 
                         "后", "hellip", "一下", "才", "下", "一次", "知道", "卖家", 
                         "现在", "装", "来说", "一点", "已经", "秒", "之前", "打开", 
                         "货", "觉得", "最后", "款"] # 保留副词(程度词)
    features_ls = []
    for tup in freq_sorted:
        if tup[0] in my_stopwords_list:
            continue
        features_ls.append(tup)
    # print(features_ls)
    return features_ls

def features_vector(comm_ls, feats_ls):
    feats_vec = []
    n = len(feats_ls)
    feats = [tup[0] for tup in feats_ls]
    for comm in comm_ls:
        temp = [0 for i in range(n)]
        for word in comm:
            if word in feats:
                if temp[feats.index(word)] == 1:
                    continue
                temp[feats.index(word)] += 1
        feats_vec.append(temp)
    return feats_vec

def Euclid(vec1, vec2):
    return (sum([(a - b) ** 2 for (a, b) in zip(vec1, vec2)])) ** 0.5

def distance(feats_vec):
    n = len(feats_vec)
    dis_dic = {}
    for i in range(n):
        for j in range(i + 1, n):
            key = (i, j)
            value = Euclid(feats_vec[i], feats_vec[j])
            dis_dic[key] = value
    dis_dic_sorted = sorted(dis_dic.items(), key=lambda x:x[1], reverse=False)
    with open("rank.txt", "w") as f:
        for tup in dis_dic_sorted:
            f.write(str(tup[0]) + "\t" + str(round(tup[1], 3)) + "\n")
    return dis_dic_sorted

def centre(feats_vec):
    feats_vec_T = np.array(feats_vec).T
    row, col = np.shape(feats_vec_T)
    ones = np.array([1 for i in range(col)]).reshape(col, 1)
    sums = np.matmul(feats_vec_T, ones)
    centre_vec = np.transpose(sums / col)
    # print(centre_vec)
    return centre_vec

def draw_wordcloud(freq_dic):
    my_stopwords_list = [" ", "不", "没", "京东", "感觉", "说", "上", "东西", "看", 
                         "后", "hellip", "一下", "才", "下", "一次", "知道", "卖家", 
                         "现在", "装", "来说", "一点", "已经", "秒", "之前", "打开", 
                         "很", "货", "觉得", "最后", "款", "还", "非常", "没有", "收到", 
                         "都", "使用", "送", "有点", "挺", "比较", "会", "再", "不是", 
                         "真的"] # 进一步筛选
    wd_dic = {}
    for key in freq_dic:
        if freq_dic[key] > 50 and key not in my_stopwords_list:
            wd_dic[key] = freq_dic[key]
        
    wc = wordcloud.WordCloud(
        font_path = "C:\Windows\Fonts\simhei.ttf",
        max_words = 200,
        max_font_size = 100,
        scale = 8
    )
    wc.generate_from_frequencies(wd_dic)
    plt.imshow(wc)
    plt.axis("off")
    plt.savefig("wc.png", dpi = 1500)
    plt.show()

def manhattan_distance(x, y):
    return np.sum(abs(x - y))

def clustering(feats_vec):
    # 绘制碎石图确定聚为几类
    # distance = []
    # k = []
    # feats_vec = np.array(feats_vec)
    # for n_clusters in range(1, 21):
    #     kmeans = KMeans(n_clusters).fit(feats_vec)
    #     distance_sum = 0
    #     for i in range(n_clusters):
    #         group = kmeans.labels_ == i
    #         members = feats_vec[group,:]
    #         for v in members:
    #             distance_sum += manhattan_distance(np.array(v), kmeans.cluster_centers_[i])
    #     distance.append(distance_sum)
    #     k.append(n_clusters)
    # plt.scatter(k, distance)
    # plt.plot(k, distance)
    # plt.xlabel("k"); plt.ylabel("distance"); plt.title("scree plot")
    # plt.show()
    kmeans = KMeans(n_clusters=9).fit(np.array(feats_vec))
    centers = kmeans.cluster_centers_
    labels = {i: np.where(kmeans.labels_ == i)[0] for i in range(9)}

    pca = PCA(n_components=2)
    X_reduced = pca.fit_transform(np.array(feats_vec))
    print(pca.explained_variance_ratio_)
    # plt.scatter(X_reduced[:, 0], X_reduced[:, 1], c=kmeans.labels_, cmap=plt.cm.Set1)
    # plt.show()
    return labels, centers, X_reduced

def most_featured_comment(comm_ls_ori, centers, labels, feats_vec):
    i = 0
    dis_cen_dic_ls = [{}, {}, {}, {}, {}, {}, {}, {}, {}]
    for j in range(9):
        indexs = labels[j].tolist()
        # print(indexs)
        for index in indexs:
            dis = Euclid(feats_vec[index], centers[i])
            dis_cen_dic_ls[i][index] = dis
        i += 1
    for dic in dis_cen_dic_ls:
        dic_sorted = sorted(dic.items(), key = lambda x:x[1])
        print(comm_ls_ori[dic_sorted[0][0]])
    
def main():
    # 打开stopwords_list.txt
    sw_ls = open_file1()
    # 打开jd_comments.txt并进行分词处理
    comm_ls, comm_ls_ori = open_file2(sw_ls)
    # 词频统计并排序
    freq_sorted, freq_dic = frequency(comm_ls)
    # 取高频词并自定义筛选-->特征集
    feats_ls = feature_filter(freq_sorted)
    # 构建特征集向量
    feats_vec = features_vector(comm_ls, feats_ls)
    # 计算每条评论间距离，导出rank.txt距离排名
    dis_dic_sorted = distance(feats_vec)
    # 计算全部评论的“物理”重心
    centre_vec = centre(feats_vec)
    # 绘制词云图
    draw_wordcloud(freq_dic)
    # PCA + clustering
    labels, centers, X_reduced = clustering(feats_vec)
    # 确定距离四类评论的中心最近的样本点
    most_featured_comment(comm_ls_ori, centers, labels, feats_vec)

if __name__ == '__main__':
    main()
```

### 2.3 结果展示

#### 2.3.1 词频及其可视化

- 初始词频如下（保留词频>50作为特征集候选词）

```python
[(' ', 1516), ('很', 1067), ('好', 635), ('不错', 451), ('还', 379), ('买', 366), ('电脑', 332), ('不', 320), ('都', 307), ('非常', 297), ('没有', 236), ('速度', 205), ('客服', 187), ('问题', 186), ('没', 185), ('开机', 183), ('京东', 180), ('满意', 176), ('感觉', 166), ('说', 156), ('很快', 149), ('收到', 147), ('快', 137), ('上', 137), ('东西', 135), ('系统', 133), ('看', 129), ('真的', 128), ('使用', 126), ('键盘', 118), ('喜欢', 115), ('高', 113), ('包装', 113), ('送', 113), ('有点', 111), ('挺', 106), ('后', 105), ('比较', 105), ('hellip', 105), ('外观', 104), ('会', 103), ('再', 102), ('游戏', 101), ('效果', 101), ('硬盘', 100), ('物流', 98), ('价格', 97), ('快递', 97), ('屏幕', 97), ('性能', 93), ('大', 93), ('机器', 88), ('流畅', 88), ('性价比', 87), ('一下', 87), ('才', 87), ('运行', 85), ('安装', 84), ('购买', 82), ('评价', 82), ('值得', 81), ('玩', 81), ('下', 80), ('鼠标', 80), ('方便', 78), ('不是', 78), ('一次', 78), ('知道', 77), ('配置', 77), ('总体', 77), ('耐心', 76), ('卖家', 74), ('好评', 74), ('现在', 73), ('笔记本', 73), ('特别', 73), ('小', 69), ('推荐', 69), ('跑分', 68), ('第一次', 68), ('希望', 67), ('装', 67), ('来说', 65), ('一点', 65), ('服务', 64), ('质量', 64), ('固态', 63), ('内存', 63), ('很多', 63), ('已经', 62), ('软件', 62), ('清晰', 61), ('以后', 60), ('机子', 60), ('办公', 59), ('声音', 58), ('购物', 58), ('需要', 58), ('赞', 58), ('几天', 58), ('秒', 57), ('之前', 57), ('发货', 53), ('朋友', 53), ('打开', 53), ('散热', 53), ('店家', 52), ('态度', 52), ('货', 52), ('完美', 52), ('觉得', 52), ('最后', 51), ('做工', 51), ('款', 50), ('好看', 50), ('支持', 50), ('玩游戏', 50)]
```

- 手动筛选出对特征集没有或贡献不大的词语，如“ ”，“京东”，“感觉”，”东西“等等，但保留表程度的词，如”很“，”非常“等等，以下即为特征集所包含的特征词：

```python
[('很', 1067), ('好', 635), ('不错', 451), ('还', 379), ('买', 366), ('电脑', 332), ('都', 307), ('非常', 297), ('没有', 236), ('速度', 205), ('客服', 187), ('问题', 186), ('开机', 183), ('满意', 176), ('很快', 149), ('收到', 147), ('快', 137), ('系统', 133), ('真的', 128), ('使用', 126), ('键盘', 118), ('喜欢', 115), ('高', 113), ('包装', 113), ('送', 113), ('有点', 111), ('挺', 106), ('比较', 105), ('外观', 104), ('会', 103), ('再', 102), ('游戏', 101), ('效果', 101), ('硬盘', 100), ('物流', 98), ('价格', 97), ('快递', 97), ('屏幕', 97), ('性能', 93), ('大', 93), ('机器', 88), ('流畅', 88), ('性价比', 87), ('运行', 85), ('安装', 84), ('购买', 82), ('评价', 82), ('值得', 81), ('玩', 81), ('鼠标', 80), ('方便', 78), ('不是', 78), ('配置', 77), ('总体', 77), ('耐心', 76), ('好评', 74), ('笔记本', 73), ('特别', 73), ('小', 69), ('推荐', 69), ('跑分', 68), ('第一次', 68), ('希望', 67), ('服务', 64), ('质量', 64), ('固态', 63), ('内存', 63), ('很多', 63), ('软件', 62), ('清晰', 61), ('以后', 60), ('机子', 60), ('办公', 59), ('声音', 58), ('购物', 58), ('需要', 58), ('赞', 58), ('几天', 58), ('发货', 53), ('朋友', 53), ('散热', 53), ('店家', 52), ('态度', 52), ('完美', 52), ('做工', 51), ('好看', 50), ('支持', 50), ('玩游戏', 50)]
```

- 再次筛选，此次删除程度词，得到如下词云图：

![wc](https://s2.loli.net/2022/01/29/aOVtMxiEdAGwFQS.png)

#### 2.3.2 ”物理“重心

- ”物理“重心即为

$$
centre=[c_1,c_2,\dots,c_n]=
\frac{1}{k}[\sum_{i=1}^kx_1,\sum_{i=1}^kx_2,\dots,\sum_{i=1}^kx_n]
$$

```python
centre_vec = 
[[0.5738523  0.4251497  0.33832335 0.28542914 0.26946108 0.23253493 0.25249501 0.1996008   0.19161677 0.16966068 0.14471058 0.15469062 0.16267465 0.15568862 0.12974052 0.13872255   0.12175649 0.09580838 0.10179641 0.10479042 0.09081836 0.09780439 0.09780439 0.10479042
  0.10578842 0.0988024  0.08682635 0.08582834 0.0998004  0.08882236 0.09580838 0.08982036   0.08183633 0.08183633 0.09481038 0.09081836 0.08183633 0.07884232 0.0758483  0.08383234   0.07285429 0.07884232 0.08582834 0.07684631 0.06187625 0.07085828 0.06287425 0.07784431
  0.06986028 0.07085828 0.06986028 0.06786427 0.06187625 0.07684631 0.06986028 0.06986028   0.06087824 0.05688623 0.06586826 0.06786427 0.06087824 0.06287425 0.06487026 0.05788423   0.05888224 0.05688623 0.0499002  0.05888224 0.04590818 0.05888224 0.05688623 0.04091816
  0.05489022 0.05289421 0.05688623 0.05289421 0.05289421 0.05489022 0.0499002  0.04491018   0.04491018 0.03792415 0.0499002  0.04391218 0.04790419 0.04391218 0.04191617             0.04391218]]
```

- 若计算所有评论中与重心点距离最近的评论作为代表性文档，较为武断，因评论集中不仅仅针对一个商品，且`centre_vec`除第一维其他维度的数值均小于0.5，说明one-hot向量较为稀疏，故考虑K-means聚类分析，得到不同类的中心，并以此计算距离中心最小的评论，以作为代表性文档。

#### 2.3.3 距离计算与可视化

- 采用欧氏距离进行向量间计算，并存入$n\times n$距离矩阵中，绘制热力图如下，颜色越深代表距离越近：

![heatmap](https://s2.loli.net/2022/01/29/hlH8kPqF5dYL6RD.png)

- 同时将升序排列的距离导入rank.txt文件中，更加直观，但条数过多，省略展示：

```python
(15, 949)	0.0
(505, 551)	0.0
(505, 753)	0.0
...
(114, 505)	1.414
(114, 551)	1.414
...
(666, 699)	6.481
(699, 783)	6.481
(221, 666)	6.557
(549, 699)	6.557
(221, 611)	6.782
(474, 699)	6.856
```

#### 2.3.4 K-means聚类

- 首先绘制碎石图 (Scree Plot)，用弯拐法确认类别数目，碎石图如下：

![碎石图](https://s2.loli.net/2022/01/29/wr3fBu5AKTzZpjN.png)

- 由此可看出$k=4$或$k=9$时其位于弯拐位置

  - $k=4$

  ```python
  labels = 
  {0: array([  3,   6,   9,  10,  11,  16,  17,  25,  27,  29,  33,  37,  40,
          41,  44,  47,  48,  51,  52,  54,  69,  70,  72,  73,  75,  76,
          81,  83,  87,  90,  91,  97, 102, 105, 107, 109, 111, 114, 122,
         123, 125, 126, 127, 129, 132, 136, 137, 138, 139, 141, 157, 158,
         160, 162, 165, 166, 169, 171, 185, 190, 191, 197, 198, 199, 203,
         206, 208, 209, 214, 216, 223, 225, 226, 232, 233, 239, 243, 244,
         248, 249, 254, 257, 258, 261, 264, 267, 268, 277, 278, 279, 280,
         282, 283, 284, 285, 286, 287, 290, 295, 296, 297, 298, 299, 302,
         313, 315, 317, 320, 325, 327, 328, 339, 340, 343, 345, 346, 351,
         352, 353, 365, 368, 370, 374, 375, 379, 383, 389, 392, 394, 402,
         403, 404, 406, 412, 419, 420, 422, 424, 430, 431, 434, 437, 441,
         449, 452, 471, 473, 475, 483, 484, 486, 487, 497, 501, 505, 511,
         517, 525, 528, 529, 531, 532, 533, 534, 537, 538, 541, 542, 543,
         544, 551, 558, 559, 561, 563, 566, 567, 577, 579, 581, 589, 590,
         591, 592, 593, 598, 601, 602, 604, 605, 607, 610, 612, 617, 619,
         621, 623, 632, 633, 635, 636, 640, 641, 643, 646, 648, 649, 653,
         654, 659, 660, 661, 662, 663, 666, 667, 669, 672, 677, 681, 683,
         685, 686, 691, 692, 695, 698, 702, 708, 709, 724, 729, 731, 732,
         733, 734, 736, 737, 740, 745, 746, 748, 749, 753, 755, 760, 764,
         767, 771, 773, 776, 777, 779, 782, 786, 787, 791, 793, 794, 795,
         796, 804, 807, 808, 810, 812, 820, 822, 824, 825, 827, 828, 833,
         835, 836, 842, 847, 848, 849, 851, 853, 854, 857, 861, 867, 870,
         876, 880, 883, 886, 890, 894, 895, 896, 897, 898, 899, 903, 913,
         914, 917, 920, 929, 930, 931, 934, 935, 938, 957, 959, 960, 961,
         963, 966, 967, 968, 971, 977, 978, 981, 984, 987, 991, 992, 993,
         994, 997], dtype=int64), 
   1: array([   0,    1,    2,    5,    8,   12,   14,   18,   21,   31,   34,
           35,   43,   45,   46,   50,   55,   57,   61,   64,   65,   66,
           74,   79,   82,   85,   86,   89,   94,   95,   96,   98,  103,
          106,  108,  110,  113,  115,  118,  119,  120,  131,  133,  140,
          142,  144,  146,  147,  151,  159,  172,  173,  175,  176,  177,
          182,  184,  186,  187,  188,  194,  205,  207,  210,  211,  212,
          220,  224,  229,  230,  235,  236,  238,  242,  246,  251,  259,
          262,  263,  269,  270,  273,  281,  288,  291,  292,  293,  304,
          305,  307,  311,  312,  314,  316,  318,  319,  329,  332,  333,
          337,  338,  347,  350,  354,  360,  362,  372,  376,  377,  378,
          380,  381,  384,  387,  390,  391,  395,  396,  400,  405,  407,
          410,  411,  413,  416,  418,  423,  428,  429,  435,  439,  443,
          444,  445,  447,  448,  450,  454,  457,  458,  462,  469,  476,
          477,  478,  480,  485,  488,  489,  496,  498,  504,  508,  510,
          516,  519,  520,  521,  522,  526,  539,  540,  554,  562,  564,
          568,  569,  572,  575,  580,  583,  584,  588,  597,  606,  614,
          615,  620,  626,  634,  642,  644,  650,  651,  652,  665,  668,
          670,  673,  676,  694,  697,  701,  704,  706,  710,  717,  723,
          725,  735,  739,  741,  744,  747,  758,  765,  766,  769,  774,
          784,  785,  788,  790,  792,  797,  798,  799,  802,  813,  815,
          816,  819,  826,  831,  832,  840,  846,  852,  858,  862,  865,
          866,  875,  878,  879,  881,  884,  885,  887,  888,  889,  891,
          892,  902,  908,  909,  912,  915,  919,  921,  925,  928,  932,
          936,  943,  945,  947,  950,  953,  954,  955,  956,  962,  964,
          965,  970,  973,  975,  976,  980,  983,  990,  995, 1001],
        dtype=int64), 
   2: array([   4,   13,   20,   22,   23,   26,   28,   39,   49,   53,   56,
           62,   67,   68,   71,   77,   78,   80,   93,   99,  101,  104,
          112,  116,  121,  128,  130,  135,  143,  149,  153,  154,  156,
          161,  163,  164,  167,  168,  170,  178,  180,  181,  189,  195,
          200,  201,  219,  222,  228,  231,  234,  237,  241,  245,  247,
          255,  256,  265,  266,  272,  274,  275,  276,  289,  301,  306,
          309,  310,  322,  323,  326,  330,  331,  334,  336,  341,  342,
          348,  356,  357,  361,  363,  366,  373,  382,  385,  386,  388,
          393,  397,  398,  408,  415,  417,  421,  425,  426,  432,  433,
          436,  438,  440,  446,  451,  453,  456,  460,  461,  463,  465,
          467,  468,  474,  479,  481,  482,  490,  492,  493,  494,  495,
          500,  502,  503,  507,  509,  512,  513,  514,  518,  523,  524,
          527,  535,  536,  546,  548,  549,  550,  552,  553,  556,  557,
          560,  565,  571,  573,  576,  585,  587,  594,  596,  599,  608,
          609,  613,  616,  618,  622,  625,  627,  629,  631,  637,  639,
          655,  656,  657,  658,  664,  671,  674,  675,  678,  682,  684,
          687,  688,  690,  696,  700,  703,  707,  712,  715,  716,  721,
          722,  727,  728,  738,  743,  750,  751,  752,  754,  756,  757,
          759,  768,  772,  778,  781,  783,  789,  801,  805,  806,  809,
          811,  814,  817,  821,  829,  834,  837,  841,  844,  845,  850,
          855,  856,  860,  863,  864,  868,  869,  877,  882,  893,  901,
          904,  905,  906,  907,  910,  911,  916,  922,  923,  924,  926,
          927,  933,  937,  940,  941,  942,  944,  946,  948,  951,  958,
          972,  979,  982,  985,  986,  988,  996,  999, 1000], dtype=int64), 
   3: array([  7,  15,  19,  24,  30,  32,  36,  38,  42,  58,  59,  60,  63,
          84,  88,  92, 100, 117, 124, 134, 145, 148, 150, 152, 155, 174,
         179, 183, 192, 193, 196, 202, 204, 213, 215, 217, 218, 221, 227,
         240, 250, 252, 253, 260, 271, 294, 300, 303, 308, 321, 324, 335,
         344, 349, 355, 358, 359, 364, 367, 369, 371, 399, 401, 409, 414,
         427, 442, 455, 459, 464, 466, 470, 472, 491, 499, 506, 515, 530,
         545, 547, 555, 570, 574, 578, 582, 586, 595, 600, 603, 611, 624,
         628, 630, 638, 645, 647, 679, 680, 689, 693, 699, 705, 711, 713,
         714, 718, 719, 720, 726, 730, 742, 761, 762, 763, 770, 775, 780,
         800, 803, 818, 823, 830, 838, 839, 843, 859, 871, 872, 873, 874,
         900, 918, 939, 949, 952, 969, 974, 989, 998], dtype=int64)}
  '''
  0. 就想买个钟表、闹钟、温度湿度计及一身的表，这个不错，等到五件五折才买的，原价买不起。就是比想象中小，得调整角度才能看清楚示数。家里地暖，太热，这个很实用，之前已经买过得力的温湿度计了。不开加湿器的话，湿度直接爆表，飘出红线以外了。
  1. 钢笔很好用。写字顺畅。很柔和。还是要多练练钢笔字。现在的人用碳素笔习惯了 很喜欢的钢笔。一直信赖京东。正好赶上有活动 现在又恢复原价了。
  2. 这个电脑确实挺不错，用着挺快，开着dnf和lol来回切换都没有问题，玩起来也并不卡，挺好的，自己又加了一个1T的机械硬盘，想怎么玩就怎么玩
  3. 个人感觉maxhub会议平板适合所有公司，尤其是初创公司，太便利了。有助于团队内部沟通频次，让团队内部沟通无代沟。
  '''
  ```

  - $k=9$

  ```python
  labels = 
  {0: array([  5,   7,  15,  24,  55,  60, 124, 143, 145, 152, 155, 192, 193,
         217, 221, 232, 252, 266, 294, 300, 303, 399, 410, 413, 427, 455,
         458, 466, 468, 474, 516, 521, 523, 536, 555, 571, 582, 586, 626,
         637, 638, 659, 676, 679, 680, 687, 711, 718, 775, 781, 802, 831,
         839, 855, 862, 871, 936, 939, 949, 969, 982, 996], dtype=int64), 
   1: array([  6,   9,  16,  22,  23,  27,  29,  37,  40,  47,  62,  67,  70,
          91,  93,  96, 101, 104, 109, 111, 112, 118, 125, 126, 127, 136,
         149, 157, 158, 160, 165, 166, 171, 181, 185, 189, 191, 198, 199,
         201, 203, 209, 216, 223, 239, 243, 244, 248, 254, 261, 268, 277,
         290, 297, 298, 301, 317, 323, 327, 339, 342, 346, 348, 351, 356,
         368, 372, 379, 382, 392, 393, 397, 412, 420, 424, 441, 471, 475,
         483, 486, 487, 497, 505, 513, 517, 518, 529, 534, 535, 538, 541,
         543, 546, 551, 590, 591, 593, 596, 601, 605, 608, 612, 613, 616,
         617, 619, 621, 627, 632, 653, 657, 660, 665, 666, 669, 678, 686,
         690, 691, 692, 698, 700, 708, 729, 731, 733, 745, 747, 749, 753,
         760, 767, 768, 773, 778, 783, 786, 789, 791, 795, 796, 804, 807,
         808, 817, 820, 821, 825, 833, 835, 842, 848, 853, 857, 860, 861,
         867, 882, 886, 897, 901, 903, 924, 926, 931, 933, 934, 935, 938,
         948, 959, 967, 978, 985, 992, 993, 994, 999], dtype=int64), 
   2: array([  1,   4,  26,  28,  30,  56,  63,  79, 117, 153, 174, 196, 200,
         219, 245, 253, 307, 315, 322, 338, 355, 358, 359, 364, 385, 414,
         436, 442, 459, 461, 470, 490, 493, 506, 530, 547, 569, 580, 595,
         598, 611, 628, 645, 693, 705, 713, 730, 743, 762, 766, 777, 780,
         792, 815, 823, 830, 872, 874, 887, 918, 944, 952, 970, 998],
        dtype=int64), 
   3: array([ 19,  41,  44,  52,  53,  58,  59,  75,  84,  86, 102, 116, 137,
         144, 150, 163, 169, 183, 194, 195, 197, 204, 218, 231, 249, 278,
         286, 292, 316, 320, 326, 343, 345, 357, 369, 376, 395, 401, 402,
         403, 407, 431, 451, 452, 472, 495, 500, 514, 519, 528, 532, 552,
         558, 567, 568, 570, 573, 585, 592, 599, 602, 630, 633, 640, 641,
         663, 681, 684, 695, 720, 724, 740, 746, 748, 770, 779, 784, 790,
         812, 816, 818, 826, 844, 845, 849, 859, 864, 876, 890, 891, 900,
         904, 907, 929, 977, 981, 984], dtype=int64), 
   4: array([ 32,  34,  36,  38,  42,  45,  46,  88, 100, 132, 148, 159, 173,
         176, 179, 202, 213, 215, 227, 238, 240, 271, 321, 324, 335, 344,
         349, 360, 367, 371, 377, 409, 433, 464, 491, 499, 515, 540, 545,
         554, 572, 578, 589, 597, 600, 624, 647, 673, 689, 699, 714, 717,
         719, 726, 750, 761, 763, 798, 800, 803, 838, 843, 865, 873, 884,
         954, 975, 976, 997], dtype=int64), 
   5: array([  3,  11,  17,  20,  33,  48,  54,  68,  69,  71,  72,  76,  80,
          81,  83,  92,  99, 105, 107, 114, 123, 128, 129, 135, 138, 141,
         154, 156, 162, 167, 168, 170, 180, 206, 214, 222, 225, 247, 255,
         256, 257, 258, 267, 272, 276, 279, 280, 282, 283, 285, 287, 299,
         302, 306, 309, 325, 330, 336, 361, 363, 374, 388, 389, 398, 404,
         415, 417, 425, 426, 430, 434, 437, 438, 440, 449, 453, 460, 463,
         473, 479, 484, 494, 501, 502, 507, 511, 524, 525, 537, 542, 548,
         557, 559, 560, 561, 565, 566, 574, 576, 577, 579, 610, 622, 623,
         625, 629, 631, 635, 636, 648, 654, 655, 658, 661, 664, 667, 674,
         682, 683, 703, 707, 709, 715, 716, 722, 727, 728, 734, 736, 737,
         751, 754, 755, 756, 764, 771, 772, 782, 787, 794, 801, 805, 810,
         811, 824, 827, 829, 836, 837, 854, 868, 877, 880, 893, 894, 895,
         898, 905, 906, 910, 911, 916, 930, 942, 946, 960, 968, 972, 988,
         991], dtype=int64), 
   6: array([   2,   13,   21,   39,   57,   78,  103,  113,  115,  121,  130,
          131,  164,  172,  177,  178,  228,  234,  241,  250,  260,  265,
          284,  289,  295,  305,  312,  318,  331,  334,  366,  373,  408,
          421,  422,  432,  444,  446,  456,  465,  467,  481,  482,  489,
          492,  503,  512,  520,  527,  539,  549,  550,  553,  556,  594,
          603,  609,  639,  656,  668,  671,  675,  696,  721,  738,  739,
          752,  757,  759,  774,  785,  788,  806,  809,  834,  841,  846,
          847,  850,  856,  863,  892,  922,  923,  927,  937,  941,  955,
          958,  971,  973,  974,  979,  989, 1000], dtype=int64), 
   7: array([  8,  10,  25,  43,  49,  51,  73,  77,  87,  90,  97, 108, 119,
         122, 139, 161, 188, 190, 207, 208, 220, 226, 233, 236, 237, 262,
         263, 264, 269, 274, 275, 296, 308, 310, 313, 319, 328, 333, 337,
         340, 341, 352, 353, 365, 370, 375, 383, 386, 394, 406, 419, 445,
         454, 488, 504, 509, 531, 533, 544, 563, 581, 583, 587, 604, 607,
         618, 643, 646, 649, 650, 652, 662, 670, 672, 677, 685, 688, 702,
         704, 712, 732, 742, 776, 793, 814, 822, 828, 851, 869, 870, 883,
         888, 889, 896, 899, 912, 913, 914, 917, 920, 921, 940, 945, 957,
         961, 963, 966, 986, 987], dtype=int64), 
   8: array([   0,   12,   14,   18,   31,   35,   50,   61,   64,   65,   66,
           74,   82,   85,   89,   94,   95,   98,  106,  110,  120,  133,
          134,  140,  142,  146,  147,  151,  175,  182,  184,  186,  187,
          205,  210,  211,  212,  224,  229,  230,  235,  242,  246,  251,
          259,  270,  273,  281,  288,  291,  293,  304,  311,  314,  329,
          332,  347,  350,  354,  362,  378,  380,  381,  384,  387,  390,
          391,  396,  400,  405,  411,  416,  418,  423,  428,  429,  435,
          439,  443,  447,  448,  450,  457,  462,  469,  476,  477,  478,
          480,  485,  496,  498,  508,  510,  522,  526,  562,  564,  575,
          584,  588,  606,  614,  615,  620,  634,  642,  644,  651,  694,
          697,  701,  706,  710,  723,  725,  735,  741,  744,  758,  765,
          769,  797,  799,  813,  819,  832,  840,  852,  858,  866,  875,
          878,  879,  881,  885,  902,  908,  909,  915,  919,  925,  928,
          932,  943,  947,  950,  951,  953,  956,  962,  964,  965,  980,
          983,  990,  995, 1001], dtype=int64)}
  '''
  0. 还行，晚上开灯和白天效果一般，晚上关灯后还不错，自带音响，微小型，可以上网搜索视频在线播放。画面大小调节主要靠距离移动
  1. 电脑很好，这个价位的配置已经很好了，关键是有礼品送，背光键盘和鼠标很炫酷！暂时还没有发现什么问题，只不过是win7系统
  2. 个人感觉maxhub会议平板适合所有公司，尤其是初创公司，太便利了。有助于团队内部沟通频次，让团队内部沟通无代沟。
  3. 真的很不错真的很不错真的很不错真的很不错真的很不错真的很不错真的很不错真的很不错真的很不错真的很不错真的很不错真的很不错真的很不错
  4. 真不容易，到真正激活，差不多用了一天，不过是我这边的问题，客服姐姐真的不错，有的时候我自己都气的想砸电脑了，美女还是很耐心的教我，传文件给我，还有几次远程协助，（不要怀疑，因为我是两台电脑）5星，
  自从来到公司，为着公司购买办公用品，#不少的心，最后发现京东上的东西又好又实惠，物流速度也快，品种也很齐全。
  5. 纸质真不错，表面很光滑，打印照片高清晰度，而且不易皱褶不卡机，厚度十分适中不渗墨双面打印很环保节约，不愧是北欧芬兰的高品质。
  6. U盘是假货的重灾区，别地方都不太敢买。看中的就是京东的售后，这个U盘看上去蛮正规。这老牌子仿冒的也不多見先用用再说吧。
  7. 一次买了三个，拿到了才发现应该买4个好点，不但更优惠还能更好的利用起来。一对用在银河电信iptv上，用原配百兆线测试一下，网速只有59mbps左右，之前家里的无线还能测出60几m，换了千兆网线，测速有62mbps，无太大改善。原来直连网线
  8. 速度能到80多m，iptv里面的超清能正常播放，用了这个电力猫就只能看慢动作的超清了。如果三个猫一起开网速还会更慢
  '''
  ```

- 尝试使用主成分分析 (PCA) 以降维可视化，但降至二维后仅能解释9%左右，没有太大意义。

```python
pca.explained_variance_ratio = [0.05235196 0.04076059]
```

- （但我还是画了一下）
  - $k=4$
  
  ![4 散点](https://s2.loli.net/2022/01/29/qEGtYvJQLoKzRBc.png)
  
  - $k=9$
  
  ![9 散点](https://s2.loli.net/2022/01/29/RpvD3deNn5TVfYm.png)

（结果还挺好看）

